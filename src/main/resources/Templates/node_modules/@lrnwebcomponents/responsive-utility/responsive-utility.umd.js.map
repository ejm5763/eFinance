{"version":3,"file":"responsive-utility.umd.js","sources":["responsive-utility.umd.js"],"sourcesContent":["import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { IronResizableBehavior } from \"@polymer/iron-resizable-behavior/iron-resizable-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nwindow.ResponsiveUtility = {};\nwindow.ResponsiveUtility.instance = null;\nclass ResponsiveUtility extends mixinBehaviors(\n  [IronResizableBehavior],\n  PolymerElement\n) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: inline;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n  static get tag() {\n    return \"responsive-utility\";\n  }\n\n  static get properties() {\n    return {\n      ...super.properties,\n      /**\n       * Stores\n       */\n      details: {\n        type: Array\n      }\n    };\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    /* handle element registration */\n    window.addEventListener(\n      \"responsive-element\",\n      this.responiveElementEvent.bind(this)\n    );\n    /* handle element deregistration */\n    window.addEventListener(\n      \"delete-responsive-element\",\n      this.deleteResponiveElementEvent.bind(this)\n    );\n  }\n  disconnectedCallback() {\n    window.removeEventListener(\n      \"responsive-element\",\n      this.responiveElementEvent.bind(this)\n    );\n    /* handle element deregistration */\n    window.removeEventListener(\n      \"delete-responsive-element\",\n      this.deleteResponiveElementEvent.bind(this)\n    );\n    super.disconnectedCallback();\n  }\n  responiveElementEvent(e) {\n    let detail = {\n      element: e.detail.element,\n      attribute:\n        e.detail.attribute !== undefined && e.detail.attribute !== null\n          ? e.detail.attribute\n          : \"responsive-size\",\n      relativeToParent:\n        e.detail.relativeToParent !== undefined &&\n        e.detail.relativeToParent !== null\n          ? e.detail.relativeToParent\n          : true,\n      sm: e.detail.sm !== undefined && e.detail.sm !== null ? e.detail.sm : 900,\n      md:\n        e.detail.md !== undefined && e.detail.md !== null ? e.detail.md : 1200,\n      lg:\n        e.detail.lg !== undefined && e.detail.lg !== null ? e.detail.lg : 1500,\n      xl: e.detail.xl !== undefined && e.detail.xl !== null ? e.detail.lg : 1800\n    };\n    if (\"ResizeObserver\" in window && detail.relativeToParent === true) {\n      let resize = new ResizeObserver(function() {\n          window.ResponsiveUtility.setSize(detail);\n        }),\n        observable =\n          e.detail.parentNode !== undefined && e.detail.parentNode !== null\n            ? e.detail.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n              ? e.detail.element.parentNode.host\n              : e.detail.element.parentNode\n            : e.detail.element;\n      resize.observe(observable);\n    }\n    this.details.push(detail);\n    window.ResponsiveUtility.setSize(detail);\n  }\n  deleteResponiveElementEvent(e) {\n    for (let i = 0; i < this.details.length; i++) {\n      if (e.detail === detail[i]) this.details.splice(i, 1);\n    }\n  }\n  /**\n   * An array of objects. Each object is contains data about an element\n   * that will be updated with responsive values.\n   *\n   * To add an element to this array, fire a 'responsive-element' event\n   * with the following data:\n   *\n   * {\n   *   \"element\": (the element itself),\n   *   \"attribute\": (the attribute that will be set with the size),\n   *   \"relativeToParent\": (true for @element query instead of @media query),\n   *   \"sm\": (optional custom sm breakpoint, default is 600),\n   *   \"md\": (optional custom md breakpoint, default is 900),\n   *   \"lg\": (optional custom lg breakpoint, default is 1200),\n   *   \"xl\": (optional custom xl breakpoint, default is 1500),\n   * }\n   *\n   */\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  constructor() {\n    super();\n    this.details = [];\n    if (window.ResponsiveUtility.instance == null) {\n      window.ResponsiveUtility.instance = this;\n    }\n    this.addEventListener(\"iron-resize\", this._onIronResize.bind(this));\n  }\n\n  /**\n   * On resize, sets sizes of any detail element that has changed.\n   */\n  _onIronResize() {\n    for (let i = 0; i < this.details.length; i++) {\n      window.ResponsiveUtility.setSize(this.details[i]);\n    }\n  }\n}\nwindow.customElements.define(ResponsiveUtility.tag, ResponsiveUtility);\nexport { ResponsiveUtility };\n\n/**\n * Checks to see if there is an instance available, and if not appends one\n */\nwindow.ResponsiveUtility.requestAvailability = function() {\n  if (window.ResponsiveUtility.instance == null) {\n    window.ResponsiveUtility.instance = document.createElement(\n      \"responsive-utility\"\n    );\n  }\n  document.body.appendChild(window.ResponsiveUtility.instance);\n};\n/**\n * Sets responsive size of detail.\n */\nwindow.ResponsiveUtility.setSize = function(detail) {\n  let size,\n    width = window.ResponsiveUtility._getWidth(detail);\n  if (width < detail.sm) {\n    size = \"xs\";\n  } else if (width < detail.md) {\n    size = \"sm\";\n  } else if (width < detail.lg) {\n    size = \"md\";\n  } else if (width < detail.xl) {\n    size = \"lg\";\n  } else {\n    size = \"xl\";\n  }\n  if (\n    detail.element.getAttribute(detail.attribute) === undefined ||\n    size !== detail.element.getAttribute(detail.attribute)\n  ) {\n    detail.element.setAttribute(detail.attribute, size);\n  }\n};\n/**\n * Returns width of detail.\n *\n * @param {object} the HTML element to check\n * @returns {number} the width of the element or its parent node\n */\nwindow.ResponsiveUtility._getWidth = function(detail) {\n  let el = detail.element;\n  if (detail.relativeToParent === true) {\n    if (\n      el &&\n      el.offsetWidth !== undefined &&\n      el.offsetWidth !== null &&\n      el.offsetWidth > 0\n    ) {\n      return el.offsetWidth;\n    } else if (el.parentNode !== null) {\n      return el.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n        el.parentNode.host\n        ? el.parentNode.host.offsetWidth\n        : el.parentNode.offsetWidth;\n    }\n  }\n  return window.outerWidth;\n};\n"],"names":["window","ResponsiveUtility","instance","mixinBehaviors","IronResizableBehavior","PolymerElement","details","addEventListener","_this","_onIronResize","bind","this","responiveElementEvent","deleteResponiveElementEvent","removeEventListener","e","detail","element","attribute","undefined","relativeToParent","sm","md","lg","xl","resize","ResizeObserver","setSize","observable","parentNode","nodeType","Node","DOCUMENT_FRAGMENT_NODE","host","observe","push","i","length","splice","html","type","Array","customElements","define","tag","requestAvailability","document","createElement","body","appendChild","size","width","_getWidth","getAttribute","setAttribute","el","offsetWidth","outerWidth"],"mappings":"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"}